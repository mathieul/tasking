%td.task{style: "width: #{width}px",
         class: task ? (task.teammate.try(:decorate) || NonTeammateDecorator.new).show_color : "",
         data: {task_id: task.try(:id),
                blank: !task,
                taskable_story_id: taskable_story.id,
                status: status,
                teammate_id: task.try(:teammate_id),
                position: position}}
  - if task
    .task-command{style: "width: #{width - 8 * 2 + 1}px"}
      %button.btn.btn-mini.edit-task(type="button")
        %i.icon-edit
      %button.btn.btn-danger.btn-mini.destroy-task(type="button")
        %i.icon-minus-sign.icon-white
      - case status
      - when "todo"
        %button.btn.btn-primary.btn-mini.progress-task(type="button")
          %i.icon-fast-forward.icon-white
      - when "in_progress"
        %button.btn.btn-success.btn-mini.complete-task(type="button")
          %i.icon-ok.icon-white
      %span.move-task.pull-right
        %i.icon-move.icon-white
    .task-content= task.description
    .task-hours= task.duration
    %textarea.task-input= task.timed_description
  - else
    .task-command{style: "width: #{width - 8 * 2 + 1}px"}
      %button.btn.btn-mini.add-task(type="button")
        %i.icon-plus-sign
    .task-content
    .task-hours &nbsp;
    %textarea.task-input do something 1h
